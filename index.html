<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Bütçe Yönetimi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.8.0/recharts.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide-react/0.263.1/lucide-react.min.js"></script>
</head>
<body>
  <div id="root"></div>
  
  <script>
    const { useState, useEffect } = React;
    const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell } = Recharts;
    const { Plus, Trash2, Edit3, Download, FileText, Sun, Moon, User, TrendingUp, TrendingDown, AlertCircle } = LucideReact;

    const BudgetApp = () => {
      const [darkMode, setDarkMode] = useState(false);
      const [currentUser, setCurrentUser] = useState({
        name: 'Eyüp Han Cam',
        email: 'eyuphan@example.com',
        budgetLimit: 10000,
        currency: 'TRY'
      });

      const [transactions, setTransactions] = useState([
        { id: 1, type: 'income', amount: 5000, category: 'Maaş', description: 'Aylık maaş', date: '2025-06-01' },
        { id: 2, type: 'expense', amount: 1200, category: 'Market', description: 'Haftalık alışveriş', date: '2025-06-02' },
        { id: 3, type: 'expense', amount: 800, category: 'Ulaşım', description: 'Akbil yükleme', date: '2025-06-03' },
        { id: 4, type: 'income', amount: 2500, category: 'Freelance', description: 'Web tasarım projesi', date: '2025-06-04' },
        { id: 5, type: 'expense', amount: 450, category: 'Eğlence', description: 'Sinema ve yemek', date: '2025-06-05' },
        { id: 6, type: 'expense', amount: 1100, category: 'Faturalar', description: 'Elektrik + Su + İnternet', date: '2025-06-06' }
      ]);

      const [showAddTransaction, setShowAddTransaction] = useState(false);
      const [editingTransaction, setEditingTransaction] = useState(null);
      const [newTransaction, setNewTransaction] = useState({
        type: 'expense',
        amount: '',
        category: '',
        description: '',
        date: new Date().toISOString().split('T')[0]
      });

      const categories = {
        income: ['Maaş', 'Freelance', 'Yatırım', 'Diğer'],
        expense: ['Market', 'Ulaşım', 'Faturalar', 'Eğlence', 'Sağlık', 'Giyim', 'Eğitim', 'Diğer']
      };

      // Hesaplamalar
      const totalIncome = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
      const totalExpense = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
      const currentBalance = totalIncome - totalExpense;
      const budgetUsagePercent = (totalExpense / currentUser.budgetLimit) * 100;

      // Grafik verileri
      const monthlyData = [
        { name: 'Ocak', income: 4500, expense: 3200 },
        { name: 'Şubat', income: 4800, expense: 3600 },
        { name: 'Mart', income: 5200, expense: 4100 },
        { name: 'Nisan', income: 4900, expense: 3800 },
        { name: 'Mayıs', income: 5100, expense: 4200 },
        { name: 'Haziran', income: totalIncome, expense: totalExpense }
      ];

      const categoryExpenses = transactions
        .filter(t => t.type === 'expense')
        .reduce((acc, t) => {
          acc[t.category] = (acc[t.category] || 0) + t.amount;
          return acc;
        }, {});

      const pieData = Object.entries(categoryExpenses).map(([category, amount]) => ({
        name: category,
        value: amount,
        percentage: ((amount / totalExpense) * 100).toFixed(1)
      }));

      const COLORS = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6', '#EC4899', '#6B7280', '#14B8A6'];

      // Para birimi formatı
      const formatCurrency = (amount) => {
        return new Intl.NumberFormat('tr-TR', {
          style: 'currency',
          currency: currentUser.currency
        }).format(amount);
      };

      // İşlem ekleme/düzenleme
      const handleSubmitTransaction = (e) => {
        e.preventDefault();
        const transaction = {
          ...newTransaction,
          amount: parseFloat(newTransaction.amount),
          id: editingTransaction ? editingTransaction.id : Date.now()
        };

        if (editingTransaction) {
          setTransactions(prev => prev.map(t => t.id === editingTransaction.id ? transaction : t));
          setEditingTransaction(null);
        } else {
          setTransactions(prev => [...prev, transaction]);
        }

        setNewTransaction({
          type: 'expense',
          amount: '',
          category: '',
          description: '',
          date: new Date().toISOString().split('T')[0]
        });
        setShowAddTransaction(false);
      };

      // İşlem silme
      const deleteTransaction = (id) => {
        setTransactions(prev => prev.filter(t => t.id !== id));
      };

      // İşlem düzenleme
      const editTransaction = (transaction) => {
        setNewTransaction(transaction);
        setEditingTransaction(transaction);
        setShowAddTransaction(true);
      };

      // CSV dışa aktarma
      const exportToCSV = () => {
        const headers = ['Tarih', 'Tür', 'Kategori', 'Açıklama', 'Tutar'];
        const rows = transactions.map(t => [
          t.date,
          t.type === 'income' ? 'Gelir' : 'Gider',
          t.category,
          t.description,
          t.amount
        ]);
        
        const csvContent = [headers, ...rows].map(row => row.join(',')).join('\n');
        const blob = new Blob([csvContent], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'budget-transactions.csv';
        a.click();
      };

      return React.createElement('div', {
        className: `min-h-screen transition-colors duration-300 ${darkMode ? 'dark bg-gray-900' : 'bg-gray-50'}`
      }, [
        React.createElement('div', {
          className: 'container mx-auto px-4 py-6',
          key: 'container'
        }, [
          // Header
          React.createElement('header', {
            className: `rounded-2xl shadow-lg p-6 mb-8 ${darkMode ? 'bg-gray-800' : 'bg-white'}`,
            key: 'header'
          }, [
            React.createElement('div', {
              className: 'flex justify-between items-center',
              key: 'header-content'
            }, [
              React.createElement('div', { key: 'title' }, [
                React.createElement('h1', {
                  className: `text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`,
                  key: 'h1'
                }, 'Bütçe Yönetimi'),
                React.createElement('p', {
                  className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,
                  key: 'welcome'
                }, `Hoş geldin, ${currentUser.name}`)
              ]),
              React.createElement('div', {
                className: 'flex items-center space-x-4',
                key: 'buttons'
              }, [
                React.createElement('button', {
                  onClick: exportToCSV,
                  className: `p-2 rounded-lg transition-colors ${darkMode ? 'hover:bg-gray-700 text-gray-300' : 'hover:bg-gray-100 text-gray-600'}`,
                  key: 'export'
                }, React.createElement(Download, { className: 'w-5 h-5' })),
                React.createElement('button', {
                  onClick: () => setDarkMode(!darkMode),
                  className: `p-2 rounded-lg transition-colors ${darkMode ? 'hover:bg-gray-700 text-gray-300' : 'hover:bg-gray-100 text-gray-600'}`,
                  key: 'theme'
                }, darkMode ? React.createElement(Sun, { className: 'w-5 h-5' }) : React.createElement(Moon, { className: 'w-5 h-5' })),
                React.createElement('div', {
                  className: `p-2 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-100'}`,
                  key: 'user'
                }, React.createElement(User, { className: `w-5 h-5 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }))
              ])
            ])
          ]),

          // Balance Summary
          React.createElement('div', {
            className: 'grid grid-cols-1 md:grid-cols-3 gap-6 mb-8',
            key: 'balance-summary'
          }, [
            // Toplam Gelir
            React.createElement('div', {
              className: `rounded-2xl shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`,
              key: 'income'
            }, [
              React.createElement('div', {
                className: 'flex items-center justify-between',
                key: 'income-content'
              }, [
                React.createElement('div', { key: 'income-text' }, [
                  React.createElement('p', {
                    className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,
                    key: 'income-label'
                  }, 'Toplam Gelir'),
                  React.createElement('p', {
                    className: 'text-2xl font-bold text-green-500',
                    key: 'income-amount'
                  }, formatCurrency(totalIncome))
                ]),
                React.createElement(TrendingUp, {
                  className: 'w-8 h-8 text-green-500',
                  key: 'income-icon'
                })
              ])
            ]),

            // Toplam Gider
            React.createElement('div', {
              className: `rounded-2xl shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`,
              key: 'expense'
            }, [
              React.createElement('div', {
                className: 'flex items-center justify-between',
                key: 'expense-content'
              }, [
                React.createElement('div', { key: 'expense-text' }, [
                  React.createElement('p', {
                    className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,
                    key: 'expense-label'
                  }, 'Toplam Gider'),
                  React.createElement('p', {
                    className: 'text-2xl font-bold text-red-500',
                    key: 'expense-amount'
                  }, formatCurrency(totalExpense))
                ]),
                React.createElement(TrendingDown, {
                  className: 'w-8 h-8 text-red-500',
                  key: 'expense-icon'
                })
              ])
            ]),

            // Kalan Bakiye
            React.createElement('div', {
              className: `rounded-2xl shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`,
              key: 'balance'
            }, [
              React.createElement('div', {
                className: 'flex items-center justify-between',
                key: 'balance-content'
              }, [
                React.createElement('div', { key: 'balance-text' }, [
                  React.createElement('p', {
                    className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,
                    key: 'balance-label'
                  }, 'Kalan Bakiye'),
                  React.createElement('p', {
                    className: `text-2xl font-bold ${currentBalance >= 0 ? 'text-green-500' : 'text-red-500'}`,
                    key: 'balance-amount'
                  }, formatCurrency(currentBalance))
                ]),
                React.createElement('div', {
                  className: `p-2 rounded-lg ${currentBalance >= 0 ? 'bg-green-100' : 'bg-red-100'}`,
                  key: 'balance-indicator'
                }, React.createElement('div', {
                  className: `w-4 h-4 rounded-full ${currentBalance >= 0 ? 'bg-green-500' : 'bg-red-500'}`
                }))
              ])
            ])
          ]),

          // Budget Progress
          React.createElement('div', {
            className: `rounded-2xl shadow-lg p-6 mb-8 ${darkMode ? 'bg-gray-800' : 'bg-white'}`,
            key: 'budget-progress'
          }, [
            React.createElement('div', {
              className: 'flex items-center justify-between mb-4',
              key: 'budget-header'
            }, [
              React.createElement('h3', {
                className: `text-lg font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`,
                key: 'budget-title'
              }, 'Bütçe Kullanımı'),
              budgetUsagePercent > 90 && React.createElement('div', {
                className: 'flex items-center text-red-500',
                key: 'budget-warning'
              }, [
                React.createElement(AlertCircle, { className: 'w-4 h-4 mr-1' }),
                React.createElement('span', { className: 'text-sm' }, 'Bütçe limiti aşılıyor!')
              ])
            ]),
            React.createElement('div', {
              className: `w-full ${darkMode ? 'bg-gray-700' : 'bg-gray-200'} rounded-full h-3`,
              key: 'progress-bg'
            }, React.createElement('div', {
              className: `h-3 rounded-full transition-all duration-500 ${
                budgetUsagePercent > 90 ? 'bg-red-500' : budgetUsagePercent > 70 ? 'bg-yellow-500' : 'bg-green-500'
              }`,
              style: { width: `${Math.min(budgetUsagePercent, 100)}%` }
            })),
            React.createElement('div', {
              className: 'flex justify-between mt-2',
              key: 'budget-info'
            }, [
              React.createElement('span', {
                className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,
                key: 'budget-amount'
              }, `${formatCurrency(totalExpense)} / ${formatCurrency(currentUser.budgetLimit)}`),
              React.createElement('span', {
                className: `text-sm font-medium ${budgetUsagePercent > 90 ? 'text-red-500' : darkMode ? 'text-gray-300' : 'text-gray-700'}`,
                key: 'budget-percent'
              }, `%${budgetUsagePercent.toFixed(1)}`)
            ])
          ]),

          // Add New Transaction Button (Mobile friendly)
          React.createElement('div', {
            className: 'flex justify-center mb-6',
            key: 'add-button-container'
          }, React.createElement('button', {
            onClick: () => setShowAddTransaction(true),
            className: 'bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors shadow-lg',
            key: 'add-button'
          }, [
            React.createElement(Plus, { className: 'w-5 h-5' }),
            React.createElement('span', {}, 'Yeni İşlem Ekle')
          ])),

          // Recent Transactions
          React.createElement('div', {
            className: `rounded-2xl shadow-lg p-6 mb-8 ${darkMode ? 'bg-gray-800' : 'bg-white'}`,
            key: 'transactions'
          }, [
            React.createElement('h3', {
              className: `text-lg font-semibold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`,
              key: 'transactions-title'
            }, 'Son İşlemler'),

            React.createElement('div', {
              className: 'overflow-x-auto',
              key: 'table-container'
            }, React.createElement('table', {
              className: 'w-full',
              key: 'transactions-table'
            }, [
              React.createElement('thead', { key: 'table-head' }, React.createElement('tr', {
                className: `border-b ${darkMode ? 'border-gray-700' : 'border-gray-200'}`,
                key: 'head-row'
              }, [
                React.createElement('th', {
                  className: `text-left py-3 px-4 text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}`,
                  key: 'th-date'
                }, 'Tarih'),
                React.createElement('th', {
                  className: `text-left py-3 px-4 text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}`,
                  key: 'th-category'
                }, 'Kategori'),
                React.createElement('th', {
                  className: `text-left py-3 px-4 text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}`,
                  key: 'th-description'
                }, 'Açıklama'),
                React.createElement('th', {
                  className: `text-right py-3 px-4 text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}`,
                  key: 'th-amount'
                }, 'Tutar'),
                React.createElement('th', {
                  className: `text-right py-3 px-4 text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}`,
                  key: 'th-actions'
                }, 'İşlemler')
              ])),
              React.createElement('tbody', {
                key: 'table-body'
              }, transactions.slice().reverse().map((transaction) => 
                React.createElement('tr', {
                  key: transaction.id,
                  className: `border-b ${darkMode ? 'border-gray-700' : 'border-gray-100'} hover:${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`
                }, [
                  React.createElement('td', {
                    className: `py-3 px-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-900'}`,
                    key: 'td-date'
                  }, new Date(transaction.date).toLocaleDateString('tr-TR')),
                  React.createElement('td', {
                    className: `py-3 px-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-900'}`,
                    key: 'td-category'
                  }, transaction.category),
                  React.createElement('td', {
                    className: `py-3 px-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-900'}`,
                    key: 'td-description'
                  }, transaction.description),
                  React.createElement('td', {
                    className: `py-3 px-4 text-sm text-right font-medium ${
                      transaction.type === 'income' ? 'text-green-500' : 'text-red-500'
                    }`,
                    key: 'td-amount'
                  }, `${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}`),
                  React.createElement('td', {
                    className: 'py-3 px-4 text-right',
                    key: 'td-actions'
                  }, React.createElement('div', {
                    className: 'flex justify-end space-x-2'
                  }, [
                    React.createElement('button', {
                      onClick: () => editTransaction(transaction),
                      className: `p-1 rounded hover:${darkMode ? 'bg-gray-600' : 'bg-gray-200'} transition-colors`,
                      key: 'edit-btn'
                    }, React.createElement(Edit3, { className: `w-4 h-4 ${darkMode ? 'text-gray-400' : 'text-gray-600'}` })),
                    React.createElement('button', {
                      onClick: () => deleteTransaction(transaction.id),
                      className: `p-1 rounded hover:${darkMode ? 'bg-gray-600' : 'bg-gray-200'} transition-colors`,
                      key: 'delete-btn'
                    }, React.createElement(Trash2, { className: 'w-4 h-4 text-red-500' }))
                  ]))
                ])
              ))
            ]))
          ]),

          // Add/Edit Transaction Modal
          showAddTransaction && React.createElement('div', {
            className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4',
            key: 'modal'
          }, React.createElement('div', {
            className: `rounded-2xl shadow-xl p-6 w-full max-w-md ${darkMode ? 'bg-gray-800' : 'bg-white'}`
          }, [
            React.createElement('h3', {
              className: `text-lg font-semibold mb-4 ${darkMode ? 'text-white' : 'text-gray-900'}`,
              key: 'modal-title'
            }, editingTransaction ? 'İşlem Düzenle' : 'Yeni İşlem Ekle'),
            
            React.createElement('form', {
              onSubmit: handleSubmitTransaction,
              key: 'transaction-form'
            }, React.createElement('div', {
              className: 'space-y-4'
            }, [
              // İşlem Türü
              React.createElement('div', { key: 'type-field' }, [
                React.createElement('label', {
                  className: `block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`
                }, 'İşlem Türü'),
                React.createElement('select', {
                  value: newTransaction.type,
                  onChange: (e) => setNewTransaction({...newTransaction, type: e.target.value}),
                  className: `w-full p-3 rounded-lg border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'} focus:ring-2 focus:ring-blue-500 focus:border-transparent`
                }, [
                  React.createElement('option', { value: 'expense', key: 'expense-opt' }, 'Gider'),
                  React.createElement('option', { value: 'income', key: 'income-opt' }, 'Gelir')
                ])
              ]),

              // Kategori
              React.createElement('div', { key: 'category-field' }, [
                React.createElement('label', {
                  className: `block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`
                }, 'Kategori'),
                React.createElement('select', {
                  value: newTransaction.category,
                  onChange: (e) => setNewTransaction({...newTransaction, category: e.target.value}),
                  className: `w-full p-3 rounded-lg border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,
                  required: true
                }, [
                  React.createElement('option', { value: '', key: 'empty-cat' }, 'Kategori seçin'),
                  ...categories[newTransaction.type].map((cat, index) => 
                    React.createElement('option', { key: index, value: cat }, cat)
                  )
                ])
              ]),

              // Tutar
              React.createElement('div', { key: 'amount-field' }, [
                React.createElement('label', {
                  className: `block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`
                }, 'Tutar (₺)'),
                React.createElement('input', {
                  type: 'number',
                  step: '0.01',
                  value: newTransaction.amount,
                  onChange: (e) => setNewTransaction({...newTransaction, amount: e.target.value}),
                  className: `w-full p-3 rounded-lg border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,
                  required: true
                })
              ]),

              // Açıklama
              React.createElement('div', { key: 'description-field' }, [
                React.createElement('label', {
                  className: `block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`
                }, 'Açıklama'),
                React.createElement('input', {
                  type: 'text',
                  value: newTransaction.description,
                  onChange: (e) => setNewTransaction({...newTransaction, description: e.target.value}),
                  className: `w-full p-3 rounded-lg border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,
                  required: true
                })
              ]),

              // Tarih
              React.createElement('div', { key: 'date-field' }, [
                React.createElement('label', {
                  className: `block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`
                }, 'Tarih'),
                React.createElement('input', {
                  type: 'date',
                  value: newTransaction.date,
                  onChange: (e) => setNewTransaction({...newTransaction, date: e.target.value}),
                  className: `w-full p-3 rounded-lg border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,
                  required: true
                })
              ]),

              // Butonlar
              React.createElement('div', {
                className: 'flex space-x-3 pt-4',
                key: 'form-buttons'
              }, [
                React.createElement('button', {
                  type: 'submit',
                  className: 'flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium transition-colors',
                  key: 'submit-btn'
                }, editingTransaction ? 'Güncelle' : 'Ekle'),
                React.createElement('button', {
                  type: 'button',
                  onClick: () => {
                    setShowAddTransaction(false);
                    setEditingTransaction(null);
                    setNewTransaction({
                      type: 'expense',
                      amount: '',
                      category: '',
                      description: '',
                      date: new Date().toISOString().split('T')[0]
                    });
                  },
                  className: `flex-1 py-3 rounded-lg font-medium transition-colors ${darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700'}`,
                  key: 'cancel-btn'
                }, 'İptal')
              ])
            ]))
          ]))
        ])
      ]);
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(BudgetApp));
  </script>
</body>
</html>
